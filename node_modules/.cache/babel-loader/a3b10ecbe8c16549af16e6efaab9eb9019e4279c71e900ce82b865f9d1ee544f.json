{"ast":null,"code":"import { io } from \"socket.io-client\";\nconst SERVER_URL = process.env.REACT_APP_SERVER_URL || \"http://localhost:4000\";\nlet socket = null;\nexport const getSocket = () => {\n  var _socket$auth, _socket$auth2;\n  const token = localStorage.getItem(\"token\");\n  const username = localStorage.getItem(\"username\");\n  if (!token || !username) return null;\n  const shouldRecreate = !socket || socket.disconnected || ((_socket$auth = socket.auth) === null || _socket$auth === void 0 ? void 0 : _socket$auth.token) !== token || ((_socket$auth2 = socket.auth) === null || _socket$auth2 === void 0 ? void 0 : _socket$auth2.username) !== username;\n  if (shouldRecreate) {\n    if (socket) {\n      socket.disconnect();\n    }\n    socket = io(SERVER_URL, {\n      transports: [\"websocket\"],\n      auth: {\n        token,\n        username\n      }\n    });\n  }\n  return socket;\n};\nexport const disconnectSocket = () => {\n  if (socket) {\n    socket.disconnect();\n    socket = null;\n  }\n};","map":{"version":3,"names":["io","SERVER_URL","process","env","REACT_APP_SERVER_URL","socket","getSocket","_socket$auth","_socket$auth2","token","localStorage","getItem","username","shouldRecreate","disconnected","auth","disconnect","transports","disconnectSocket"],"sources":["C:/Users/PC/OneDrive/Desktop/chess/src/socket.js"],"sourcesContent":["import { io } from \"socket.io-client\";\n\nconst SERVER_URL = process.env.REACT_APP_SERVER_URL || \"http://localhost:4000\";\n\nlet socket = null;\n\nexport const getSocket = () => {\n  const token = localStorage.getItem(\"token\");\n  const username = localStorage.getItem(\"username\");\n  if (!token || !username) return null;\n\n  const shouldRecreate = !socket || socket.disconnected || socket.auth?.token !== token || socket.auth?.username !== username;\n\n  if (shouldRecreate) {\n    if (socket) {\n      socket.disconnect();\n    }\n    socket = io(SERVER_URL, {\n      transports: [\"websocket\"],\n      auth: { token, username },\n    });\n  }\n\n  return socket;\n};\n\nexport const disconnectSocket = () => {\n  if (socket) {\n    socket.disconnect();\n    socket = null;\n  }\n};\r\n"],"mappings":"AAAA,SAASA,EAAE,QAAQ,kBAAkB;AAErC,MAAMC,UAAU,GAAGC,OAAO,CAACC,GAAG,CAACC,oBAAoB,IAAI,uBAAuB;AAE9E,IAAIC,MAAM,GAAG,IAAI;AAEjB,OAAO,MAAMC,SAAS,GAAGA,CAAA,KAAM;EAAA,IAAAC,YAAA,EAAAC,aAAA;EAC7B,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;EAC3C,MAAMC,QAAQ,GAAGF,YAAY,CAACC,OAAO,CAAC,UAAU,CAAC;EACjD,IAAI,CAACF,KAAK,IAAI,CAACG,QAAQ,EAAE,OAAO,IAAI;EAEpC,MAAMC,cAAc,GAAG,CAACR,MAAM,IAAIA,MAAM,CAACS,YAAY,IAAI,EAAAP,YAAA,GAAAF,MAAM,CAACU,IAAI,cAAAR,YAAA,uBAAXA,YAAA,CAAaE,KAAK,MAAKA,KAAK,IAAI,EAAAD,aAAA,GAAAH,MAAM,CAACU,IAAI,cAAAP,aAAA,uBAAXA,aAAA,CAAaI,QAAQ,MAAKA,QAAQ;EAE3H,IAAIC,cAAc,EAAE;IAClB,IAAIR,MAAM,EAAE;MACVA,MAAM,CAACW,UAAU,CAAC,CAAC;IACrB;IACAX,MAAM,GAAGL,EAAE,CAACC,UAAU,EAAE;MACtBgB,UAAU,EAAE,CAAC,WAAW,CAAC;MACzBF,IAAI,EAAE;QAAEN,KAAK;QAAEG;MAAS;IAC1B,CAAC,CAAC;EACJ;EAEA,OAAOP,MAAM;AACf,CAAC;AAED,OAAO,MAAMa,gBAAgB,GAAGA,CAAA,KAAM;EACpC,IAAIb,MAAM,EAAE;IACVA,MAAM,CAACW,UAAU,CAAC,CAAC;IACnBX,MAAM,GAAG,IAAI;EACf;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}